var o=[],s=null;function l(r){let{attribute:d,beginBatch:i,endBatch:c}=r;s||(s=new MutationObserver(n=>{n.forEach(t=>{if(!t.removedNodes.length)return;let a=Array.from(t.removedNodes??[]);o.forEach(e=>{a.includes(e.node)&&!document.body.contains(e.node)&&e.callback(t.target)})}),o=o.filter(t=>!t.isRemoved)}),s.observe(document.body,{childList:!0,subtree:!0})),d({name:"on-remove",requirement:{key:"denied",value:"must"},argNames:["parent"],apply:({rx:n,el:t})=>{let a=e=>{i(),n(e),c()};return o.push({node:t,callback:a,isRemoved:!1}),()=>{o=o.map(e=>(e.node===t&&(e.isRemoved=!0),e))}}})}(async()=>{try{let r=await import("datastar");l(r)}catch(r){console.info(`data-on-remove: auto-install skipped: ${r}`)}})();export{l as install};
